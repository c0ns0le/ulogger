dist: trusty
sudo: false
cache:
  directories:
  - "$HOME/.cache/pip"
language: python
matrix:
  include:
  - python: '2.7'
    env: TOXENV=py27
  - python: '3.4'
    env: TOXENV=py34
  - python: '3.5'
    env: TOXENV=py35
  - python: '3.6'
    env: TOXENV=py36
  - python: pypy2.7-5.8.0
    env: TOXENV=pypy
install:
- pip install tox
script:
- tox
before_install:
- pip install codecov
after_success:
- tox -e coverage-report
- codecov
notifications:
  email: false
deploy:
  provider: pypi
  user: spotify_alf
  password:
    secure: RGWBTSw8TzUnL79JZEMpyWkaABSU79g40Kz9j1LE49WRhEQzR9lyflNT2qCoT6Lq/p1CqO2EWTCMN6JDhKBja4mxEFk1gdL1keeb/qxImGkk8IB4QRFDc/vkxF++iskq2UEpVe0GopwInrv8kwnVJGHlJamrPFSgiamyJw6OqKK3Pd+SceyXOhHi2wyjWHVmMmlG7lpwqVNMTox86QNbRE65CYWrcTyJbZFxNDyqfKEL+q/gUSHHkMqVlqMfe1cjp0zuv4gZcK26yeGyb40Z//TUEpkj3mQDvaz0xzBybeG98AgPPYJh6fy7WUrAm2/56JPbT8gAXRbA/IP8bZL0KOjt3MlGe1U5ELDKVf9UlzEU+thm/AuAbIbuGGS015ynukBYLxGvcxDudhZKAeutQQtUALBg2y4+jIqSq21e8FwtjESKJ5/LzaLUP6gcButNKrYF4XJtgamCill0yh8wjqxqpGJmATtDqXGeIpm0i1aOUmuduSckbwvs50FxMoJ3E4hoIbiKzyLyIEx1+lQGVYYOZnH5hrOsRknesTF2ex8s4BN7DDThzti29xUPDXO2ZvpblljwnsOoq2/8VTWmujTCixTNAxuuYfOkS67+Wg2ENdVh7eY4wOulFHHJkEOn+dat1PvphUtR9YyWHCD+QPI/Aw0OI9oUgHgGqSdjwc8=
  on:
    tags: true
